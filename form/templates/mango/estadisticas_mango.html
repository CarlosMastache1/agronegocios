{% extends 'base3.html' %}

{% load static %}

{% block content %}



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
<link rel="stylesheet" href="{% static 'pecuario/css/avicola_css.css' %}">
<link rel="stylesheet" href="{% static 'pecuario/css/estilo_pecuario.css' %}">

<main id="contents" class="site-contnts">
	<!--BANNER-->
	<div class="home-slider">
		<div class="item" data-slide="{% static 'agricola/mango/imagenes/13.JPG' %}">
			<div class="container">
				<div class="row">
					<div class="col-sm-11 col-md-8 col-lg-7"></div>
				</div>
			</div>
		</div>
		
		<div class="item" data-slide="{% static 'agricola/mango/imagenes/14.JPG' %}">
			<div class="container">
				<div class="row">
					<div class="col-sm-11 col-md-8 col-lg-7"></div>
				</div>
			</div>
		</div>
	</div>
</main>


<!-- Cinta ticker -->
<div class="ticker">
	<div class="ticker-content" id="ticker-content">
		Cargando datos...
	</div>
</div>

<div>
	<div id="body_pag">
		<!-- Secciones -->
		<section id="section1" class="section">
			<h1>DESCRIPCI√ìN DEL <strong>MANGO</strong></h1>
			<p style="text-align: center; font-size: 1.8rem; margin-bottom: 30px;">
				Este cultivo es perenne por lo que tiene un ciclo de vida de <strong>28 a 32 a√±os</strong>, Oaxaca tiene <strong>60 Municipios</strong> productores de mango, se encuentra en el <strong>5to lugar</strong> en producci√≥n a nivel nacional, con <strong>13 pueblos ind√≠genas</strong> productores de este cultivo.
			</p>


			<div class="descripcion">
				<div class="container">

					<div class="card">
						<h2><i class="fa-solid fa-leaf" style="color: green;"></i> Cultivo Perenne</h2>
						<p>
							Ciclo de vida <strong>28 a 32 a√±os</strong>.
						</p>
					</div>

					<div class="card">
						<h2>üìä Lugar a nivel mundial</h2>
						<p>
							M√©xico ocupa el <strong>6¬∞ lugar</strong> a nivel mundial en la producci√≥n de mango; con una superficie para su cosecha de <strong>221,858 Ha</strong>.
						</p>
					</div>

					<div class="card">
						<h2>üìç Municipios en Oaxaca</h2>
						<p>
							En Oaxaca hay <strong>60 municipios</strong> que est√°n dedicados al cultivo de mango.
						</p>
					</div>

					<div class="card">
						<h2>üá≤üáΩ Lugar a nivel nacional</h2>
						<p>Oaxaca ocupa el <strong>5¬∫ lugar</strong> nacional en producci√≥n de mango. Con un volumen de producci√≥n de <strong>214,915 Ton</strong>, una superficie de <strong>19,392 Ha</strong>, con un rendimeinto de <strong>8.96 Ton/Ha</strong> y un valor de <strong>$1,070,664,171</strong>.
						</p>
					</div>

					<div class="card">
						<h2>üìà Regi√≥n con mayor producci√≥n</h2>
						<p>
							La regi√≥n del <strong>Istmo</strong> es la region con mayor
							producci√≥n de mango en el estado de Oaxaca contando con <strong>18 Municipios</strong> de producci√≥n. Con un volumen de producci√≥n de <strong>189,388 Ton</strong>, una superficie de <strong>16,429 Ha</strong>, con un rendimeinto de <strong>10.01 Ton/Ha</strong> y un valor de <strong>$959,021,903</strong>.

						</p>
					</div>

					<div class="card">
						<h2>üßëüèΩ‚Äçüåæ Pueblos ind√≠genas</h2>
						<p>Un total de <strong>13 pueblos ind√≠genas</strong> se encuentran dentro de la producci√≥n de
							mango.</p>
					</div>
				</div>
			</div>
		</section>

		<section id="section2" class="section">
			<h1>PRODUCCI√ìN MUNDIAL DE MANGO</h1>

			<H2>Cierre Agricola 2022</H2>
			<div class="contenedor_col1">
				<div class="columna1">


					<div class="controls">
						<label>
							Mostrar
							<select id="rowsPerPage">
								<option value="10">10</option>
								<option value="25">25</option>
								<option value="50">50</option>
								<option value="100">100</option>
							</select>
							registros
						</label>

						<input type="text" id="searchInput" placeholder="Buscar...">
					</div>

					<table id="dataTable" class="tabla-datos">
						<thead>
							<tr>
								<th>RANKING</th>
								<th>PA√çS</th>
								<th>SUPERFICIE COSECHADA (HA)</th>
							</tr>
						</thead>
						<tbody>
							<!-- Filas din√°micas -->
						</tbody>
						<tfoot>
							<tr id="total_datos_tab1">

							</tr>
						</tfoot>
					</table>

					<div class="pagination">
						<button id="prevBtn">Anterior</button>
						<span id="pageInfo"></span>
						<button id="nextBtn">Siguiente</button>
					</div>



				</div>
				<iframe id="frame_mundo_prod" src="{% url 'iframeMundo' %}" class="columna2" frameborder="0"></iframe>
			</div>

		</section>

		<section id="section3" class="section">
			<h1>PRODUCCI√ìN NACIONAL DE MANGO</h1>

			<H2>Cierre Agricola 2022</H2>

			<div class="controls">
				<label>
					Mostrar
					<select id="rowsPerPage2">
						<option value="10">10</option>
						<option value="25">25</option>
						<option value="50">50</option>
						<option value="100">100</option>
					</select>
					registros
				</label>

				<input type="text" id="searchInput2" placeholder="Buscar...">
			</div>
			<table id="data2Table" class="tabla-datos">
				<thead>
					<tr>
						<th>RANKING</th>
						<th>ENTIDAD FEDERATIVA</th>
						<th>VOLUMEN DE PRODUCCI√ìN (TON)</th>
						<th>SUPERFICIE SEMBRADA (HA)</th>
						<th>RENDIMIENTO (TON/HA)</th>
						<th>VALOR DE LA PRODUCCI√ìN ($)</th>
					</tr>
				</thead>
				<tbody>
					<!-- Filas din√°micas -->
				</tbody>
				<tfoot>
					<tr id="total_datos_tab2"></tr>
				</tfoot>
			</table>

			<div class="pagination">
				<button id="prevBtn2">Anterior</button>
				<span id="pageInfo2"></span>
				<button id="nextBtn2">Siguiente</button>
			</div>
			<iframe id="iframe_mexico_prod" src="{% url 'iframeMexico' %}" class="mapa_mexico_sty"
				frameborder="0"></iframe>
		</section>

		<section id="section4" class="section">
			<h1>BALANZA COMERCIAL DE MANGO EN M√âXICO</h1>

			<div class="chart-container">
				<canvas id="lineChart"></canvas>
			</div>


			<H2>DESTINO DE LA EXPORTACI√ìN 2023 POR PA√çS</H2>

			<div class="controls">
				<label>
					Mostrar
					<select id="rowsPerPageDesExp">
						<option value="10">10</option>
						<option value="25">25</option>
						<option value="50">50</option>
						<option value="100">100</option>
					</select>
					registros
				</label>

				<input type="text" id="searchInputDesExp" placeholder="Buscar...">
			</div>
			<table id="dataTableDesExp" class="tabla-datos">
				<thead>
					<tr>
						<th>NUM</th>
						<th>PA√çS</th>
						<th>VALOR (USD)</th>
					</tr>
				</thead>
				<tbody>
					<!-- Filas din√°micas -->
				</tbody>
				<tfoot>
					<tr id="total_datos_tabDesExp"></tr>
				</tfoot>
			</table>

			<div class="pagination">
				<button id="prevBtnDesExp">Anterior</button>
				<span id="pageInfoDesExp"></span>
				<button id="nextBtnDesExp">Siguiente</button>
			</div>

		</section>

		<section id="section5" class="section">
			<h1>PRODUCCI√ìN HIST√ìRICA DE MANGO EN OAXACA</h1>
			<div class="chart-container">
				<canvas id="lineChart2"></canvas>
			</div>
		</section>


		<section id="section6" class="section">
			<h1>PRODUCCI√ìN DE MANGO EN OAXACA</h1>
			<table class="tabla-datos">
				<thead>
					<tr>
						<th>REGION</th>
						<th>VOLUMEN DE PRODUCCION (TON)</th>
						<th>SUPERFICIE SEMBRADA (HA)</th>
						<th>RENDIMIENTO (TON/HA)</th>
						<th>VALOR DE LA PRODUCCI√ìN ($)</th>
						<th>CANTIDAD DE MUNICIPIOS</th>
					</tr>
				</thead>

				<tbody id="tabla_produccion_prod_oax">

				</tbody>
				<tfoot>
					<tr id="total_tab_pro_miel_oax">
					</tr>
				</tfoot>
			</table>

			<h4>VOLUMEN DE PRODUCCION POR PUEBLO INDIGENA
			</h4>

			<div class="chart-container">
				<canvas id="lineChart3"></canvas>
			</div>
		</section>

		<section id="section7" class="section">
			<h1>ESTACIONALIDAD DE LA PRODUCCI√ìN EN OAXACA</h1>
			<p style="text-align: center; font-size: 1.8rem; margin-bottom: 30px;">
				La estacionalidad de la producci√≥n hace referencia a la frecuencia de meses donde se produce mango en
				el estado
				de Oaxaca, medido a trav√©s del √≠ndice de volumen f√≠sico, es decir, el mes de <strong>mayo</strong>
				es
				cuando se
				cosecha m√°s mango alcanzando <strong>442 puntos</strong> de dicho √≠ndice.
			</p>
			<h2>INDICE DE VOLUMEN FISICO (IVF)</h2>
			<div class="chart-container">
				<canvas id="lineChart4"></canvas>
			</div>

		</section>


		<section id="section8" class="section">
			<h1>MUNICIPIOS QUE PRODUCEN DE MANGO EN OAXACA</h1>
			<div class="contenedor_col1">
				<div class="columna1">
					<table class="tabla-datos">
						<thead>
							<tr>
								<th>REGION</th>
								<th>CANTIDAD DE MUNICIPIOS</th>
							</tr>
						</thead>

						<tbody id="tb_mun_producto_oax">

						</tbody>
						<tfoot>
							<tr>
								<th>Total:</th>
								<th id="total_mun_producto_oax"></th>
							</tr>
						</tfoot>

					</table>
				</div>
				<iframe id="frame_oaxaca" src="{% url 'iframeOaxaca' %}" class="columna2" frameborder="0"></iframe>
			</div>
		</section>
	</div>

	<!-- Barra de progreso lateral -->
	<div class="progress-bar">
		<div class="progress-circle" data-target="section1"><i class="fa-solid fa-book"></i></div>
		<div class="progress-circle" data-target="section2"><i class="fa-solid fa-earth-americas"></i></div>
		<div class="progress-circle" data-target="section3"><i class="fa-solid fa-map-location-dot"></i></div>
		<div class="progress-circle" data-target="section4"><i class="fa-solid fa-scale-balanced"></i></div>
		<div class="progress-circle" data-target="section5"><i class="fa-solid fa-chart-line "></i></div>
		<div class="progress-circle" data-target="section6"><i class="fa-solid fa-chart-pie"></i></div>
		<div class="progress-circle" data-target="section7"><i class="fa-solid fa-calendar-days"></i></div>
		<div class="progress-circle" data-target="section8"><i class="fa-solid fa-map-pin"></i></div>
	</div>
</div>

<!-- Script -->
<script>
	const circles = document.querySelectorAll('.progress-circle');
	const sections = document.querySelectorAll('section');

	// Scroll a la secci√≥n al hacer clic
	circles.forEach(circle => {
		circle.addEventListener('click', () => {
			const targetId = circle.getAttribute('data-target');
			const targetSection = document.getElementById(targetId);
			targetSection.scrollIntoView({ behavior: 'smooth' });
		});
	});

	// Detectar qu√© secci√≥n est√° en vista y activar el c√≠rculo correspondiente
	window.addEventListener('scroll', () => {
		let current = '';
		sections.forEach(section => {
			const sectionTop = section.offsetTop;
			const sectionHeight = section.clientHeight;
			if (pageYOffset >= sectionTop - sectionHeight / 3) {
				current = section.getAttribute('id');
			}
		});

		circles.forEach(circle => {
			circle.classList.remove('active');
			if (circle.getAttribute('data-target') === current) {
				circle.classList.add('active');
			}
		});
	});
</script>

<script src="{% static 'data/mapas/agricola/mango.js' %}"></script>
<script src="{% static 'agricola/mango/js/mango.js' %}"></script>

<script>

	const mundo_producto = document.getElementById("frame_mundo_prod");
	mundo_producto.onload = function () {
		mundo_producto.contentWindow.postMessage(paises_datos_pro, "*");
	}

	const mexico_producto = document.getElementById("iframe_mexico_prod");
	mexico_producto.onload = function () {
		mexico_producto.contentWindow.postMessage(estados_datos_pro, "*");
	}

	const iframe = document.getElementById('frame_oaxaca');
	iframe.onload = function () {
		iframe.contentWindow.postMessage(regionesConMunicipios, "*");
	};
</script>

<script>
	// Funci√≥n para obtener y actualizar los datos en la cinta
	function fetchTickerData() {
		fetch('/grafica-maiz/api/')
			.then(response => response.json())
			.then(data => {
				let tickerText = `Precio Actual: ${data.current_price} | Apertura: ${data.open_price} | M√°ximo: ${data.high_price} | M√≠nimo: ${data.low_price}`;
				document.getElementById('ticker-content').innerText = tickerText;
			})
			.catch(error => console.error("Error al obtener datos:", error));
	}

	// Obtiene los datos inicialmente y actualiza cada 10 segundos
	fetchTickerData();
	setInterval(fetchTickerData, 10000);
</script>

{% endblock %}